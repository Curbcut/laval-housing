---
title: "5.2.1 Axe économique du parc actuel - Prix"
author: "Curbcut"
output: html_document
---

```{r setup_5_2_1, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(tidyverse)
library(gt)
qs::qload(here::here("data", "section_5_2_1.qsm"))
```

# 5.2.1.1 Sur le marché de la propriété (Prix médian par typologie et secteur Lavallois)

_Source: Statistiques immobilières. (2024). Centris.  Récupéré au https://www.centris.ca/fr/outils/statistiques-immobilieres_

Les prix médians des propriétés à Laval varient significativement en fonction du secteur et du type de logement, avec des écarts marqués entre les unifamiliales, les copropriétés et les plex (2 à 5 logements). En ce qui concerne les maisons unifamiliales, le secteur de Sainte-Dorothée affiche le prix médian le plus élevé, atteignant 665 000 \$, suivi de Duvernay avec 630 000 \$. À l'inverse, le secteur de Laval-Ouest enregistre le prix médian le plus bas à 449 500 \$. Pour les copropriétés, les prix médians sont plus accessibles, notamment à Laval-des-Rapides où le prix médian est de 340 000 \$, tandis qu'à Sainte-Dorothée, il atteint 418 000 \$. Les plex, bien que présents en plus faible volume, affichent des prix médians élevés, en particulier dans les secteurs de Chomedey (797 500 \$) et Laval-des-Rapides (739 500 \$).

Le prix de vente médian sépare l'ensemble des transactions en deux parties égales : la moitié des transactions ont été effectuées à un prix inférieur, tandis que l'autre moitié ont été conclues à un prix supérieur.

```{r prixSurMarche, include=TRUE, tab.cap="Prix médian des propriétés par typologie (unifamiliale, copropriété et plex) et par secteur à Laval sur les 4 derniers trimestres", tab.align = 'center'}
# prix_sur_marche_table
```

# 5.2.1.2 Prix médian des propriétés selon le type et le nombre de chambres à coucher

# 5.2.1.3 Prix médian des logements selon l'occupation des logements (vacants ou occupés) ou des logements nouvellement construits

# 5.2.1.4 Ventes sans garantie légale

Données non spécifiques à Laval dans le cahier métropolitain.

# 5.2.1.5 Sur le marché locatif

There is no data which describes sales prices for rental buildings.

# 5.2.1.6 Loyer moyen des logements locatifs selon le nombre de chambres à coucher

```{r rent_bedrooms}
rent_90s <- 
  rent_by_bedroom |> 
  filter(is.na(zone), bedroom == "Total", year %in% c(1990, 1999)) |> 
  pull(value) |> 
  scales::dollar()

rent_years <- 
  rent_by_bedroom |> 
  filter(is.na(zone)) |>
  mutate(date = case_when(
    year >= 2019 ~ "2019-2023",
    year >= 2014 ~ "2014-2018",
    year >= 2009 ~ "2009-2013",
    year >= 2004 ~ "2004-2008",
    year >= 1999 ~ "1999-2003",
    year >= 1994 ~ "1994-1998",
    year >= 1990 ~ "1990-1993")) |> 
  summarize(avg = mean(value), .by = c(date, bedroom)) |> 
  pivot_wider(names_from = bedroom, values_from = avg) |> 
  relocate(Total, .before = Bachelor)

bach_abs <- scales::dollar(rent_years$Bachelor[7] - rent_years$Bachelor[6])
bach_pct <- scales::percent((rent_years$Bachelor[7] - rent_years$Bachelor[6]) /
                             rent_years$Bachelor[6])
bach_2014 <- scales::dollar(rent_years$Bachelor[6])
bach_2019 <- scales::dollar(rent_years$Bachelor[7])

one_abs <- scales::dollar(rent_years$`1 Bedroom`[7] - rent_years$`1 Bedroom`[6])
one_pct <- scales::percent((rent_years$`1 Bedroom`[7] - rent_years$`1 Bedroom`[6]) /
                             rent_years$`1 Bedroom`[6])
one_2014 <- scales::dollar(rent_years$`1 Bedroom`[6])
one_2019 <- scales::dollar(rent_years$`1 Bedroom`[7])

three_abs <- scales::dollar(rent_years$`3 Bedroom +`[7] - rent_years$`3 Bedroom +`[6])
three_pct <- scales::percent((rent_years$`3 Bedroom +`[7] - rent_years$`3 Bedroom +`[6]) /
                             rent_years$`3 Bedroom +`[6])
three_2014 <- scales::dollar(rent_years$`3 Bedroom +`[6])
three_2019 <- scales::dollar(rent_years$`3 Bedroom +`[7])

```

In the 1990s, average rents in purpose-built rental buildings in Laval were stagnant; in 1990 the average monthly rent across all bedroom types was `r rent_90s[1]`, and by 1999 it had only increased slightly to `r rent_90s[2]`. Rents started to increase in the early 2000s, and since 2010 in particular, average rents have been rising rapidly across all bedroom types.

```{r plot_5_2_1_6_facet}
plot_5_2_1_6_facet
```

```{r plot_5_2_1_6_change_facet}
plot_5_2_1_6_change_facet
```

```{r table_5_2_1_6_five_year}
table_5_2_1_6_five_year
```

Although all bedroom types have seen rapid rent increases in recent years, the increase has been lower in both absolute and relative terms in bachelor units. In the 2019-2023 period, rents for bachelor units increased `r bach_abs` from `r bach_2014` to `r bach_2019`—a `r bach_pct` increase. By contrast, rents for 1-bedroom units increased `r one_abs` from `r one_2014` to `r one_2019`—a `r one_pct` increase—and rents for 3-and-more-bedroom units increased `r three_abs` from `r three_2014` to `r three_2019`—a `r three_pct` increase.

The increase in purpose-built rental rents has not been spread evenly across the City. For larger units, rents have become particularly high in the Chomedey/Sainte-Dorothée sector. By contrast, smaller units (bachelor and 1-bedroom suites) remain relatively affordable in the eastern portion of the island.

```{r map_5_2_1_6_annual}
map_5_2_1_6_annual
```

```{r rent_construction}
rent_years <- 
  rent_by_construction |> 
  filter(is.na(zone), year == 2023) |> 
  pull(value)

new_2023 <- scales::dollar(rent_years[4])
old_low_2023 <- scales::dollar(rent_years[2])
old_high_2023 <- scales::dollar(rent_years[1])
```

Rents have risen particularly quickly in new buildings. While the average rent in 2023 reached `r new_2023` in buildings constructed in the year 2000 or later, the equivalent figure was between `r old_low_2023` and `r old_high_2023` in buildings constructed before 2000. This gap has been present since the beginning of the time series (1990), but it has widened substantially since 2020, when the rents in new construction skyrocketed relative to other construction dates.

```{r plot_5_2_1_6_construction_facet}
plot_5_2_1_6_construction_facet
```

```{r table_5_2_1_6_construction_five_year}
table_5_2_1_6_construction_five_year
```

# 5.2.1.7 Taux d'inoccupation (différenciation entre vacants et occupés) selon le nombre de chambres à coucher et le prix

# 5.2.1.8 Valeur foncière (secteur lucratif, secteur non lucratif)

```{r s_6_1_5, include = FALSE}

# 80-20 ratios
uef_values <- 
  uef |> 
  mutate(type = if_else(str_detect(type, "rangée"), "En rangée", type)) |> 
  summarize(per_property = mean(value),
            per_unit = sum(value) / sum(units),
            .by = type) |> 
  mutate(across(-type, scales::dollar))

```

_Data source: Unité d'evaluation foncière_

In 2019, the average assessed value of a residential property in Laval was `r scales::dollar(mean(uef$value))`. In both per-property and per-unit terms, detached homes had the highest average assessed value (`r uef_values$per_property[1]` per property, and `r uef_values$per_unit[1]` per unit), followed by "jumelé" (`r uef_values$per_property[2]` per property, and `r uef_values$per_unit[2]` per unit), then "en rangée" (`r uef_values$per_property[4]` per property, and `r uef_values$per_unit[4]` per unit), and finally "intégré" (`r uef_values$per_property[3]` per property, and `r uef_values$per_unit[3]` per unit).

```{r plot_6_1_12_boxplot}
plot_6_1_12_boxplot
```

All property types display a clear positive relationship between construction date and assessed value; newer properties have higher assessed values on average, although the relationship is stronger in per-property terms than in per-unit terms.

```{r plot_6_1_12_year_property}
plot_6_1_12_year_property
```

```{r plot_6_1_12_year_unit}
plot_6_1_12_year_unit
```

In general, assessed property values are higher in the south-western part of the city and lower in the north east. However, in per-square-foot terms, it is actually the central part of the city (H9B postal codes) where assessed values are highest.

```{r map_6_1_12}
map_6_1_12
```

