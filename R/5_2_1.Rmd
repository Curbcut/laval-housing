---
title: "5.2.1 Axe économique du parc actuel - Prix"
author: "Curbcut"
output: html_document
---

```{r setup_5_2_1, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(tidyverse)
library(gt)
qs::qload(here::here("data", "section_5_2_1.qsm"))
```

# 5.2.1.1 Sur le marché de la propriété (Prix médian par typologie et secteur Lavallois)

_Source: Statistiques immobilières. (2024). Centris.  Récupéré au https://www.centris.ca/fr/outils/statistiques-immobilieres_

Les prix médians des propriétés à Laval varient significativement en fonction du secteur, du type de logement et du nombre de chambres à coucher (entre autres), avec des écarts marqués entre les unifamiliales, les copropriétés et les plex (2 à 5 logements). En ce qui concerne les maisons unifamiliales, le secteur de Sainte-Dorothée affiche le prix médian le plus élevé, atteignant 665 000 \$, suivi de Duvernay avec 630 000 \$. À l'inverse, le secteur de Laval-Ouest enregistre le prix médian le plus bas à 449 500 \$. Pour les copropriétés, les prix médians sont plus accessibles, notamment à Laval-des-Rapides où le prix médian est de 340 000 \$, tandis qu'à Sainte-Dorothée, il atteint 418 000 \$. Les plex, bien que présents en plus faible volume, affichent des prix médians élevés, en particulier dans les secteurs de Chomedey (797 500 \$) et Laval-des-Rapides (739 500 \$).

```{r prixSurMarche, include=TRUE, tab.cap="Prix médian des propriétés par typologie (unifamiliale, copropriété et plex) et par secteur à Laval sur les 4 derniers trimestres", tab.align = 'center'}
# prix_sur_marche_table
```







# 6.1.5 Prix des logements neufs

```{r s_6_1_5, include = FALSE}

# 80-20 ratios
ratios <- 
  new_prices |> 
  filter(year %in% c(1998, 2020)) |> 
  mutate(ratio_80_20 = ratio_80_20 - 1) |> 
  pull(ratio_80_20) |> 
  scales::percent()

```

_Data source: CMHC Market Absorption Survey_

CMHC collects data on the selling prices of newly absorbed homeowner and condominium units. According to this data, Laval has seen remarkably consistent annual increases in new housing prices since the 1990s. In 1998, the average selling price of a newly absorbed unit was `r scales::dollar(new_prices$average[1])`, while in 2023 it was `r scales::dollar(new_prices$average[26])`--an increase of `r scales::percent(new_prices$average[26] / new_prices$average[1] - 1)`. Over time, the high-end of the market has seen faster proportionate price increases than the low end of the market. In 1998, the 80th-percentile newly absorbed unit sold for `r ratios[1]` more than the 20th-percentile unit, while in 2020 it was `r ratios[2]`. (The subsequent three years have seen this ratio decline again, but the volatility of the trend makes it too soon to know if that reflects a substantive shift in market conditions.)

```{r plot_6_1_5_percentiles}
plot_6_1_5_percentiles
```

At the same time, the number of absorbed units being counted towards these prices has declined sharply since the early 2000s. Since the CMHC only collects data on homeowner and condominium units, and an increasingly large percentage of new housing in Laval is renter housing, the price of newly absorbed units is an increasingly imprecise metric for measuring housing costs.

```{r plot_6_1_5_units}
plot_6_1_5_units
```




# 5.2.1.2 Prix médian des propriétés selon le type et le nombre de chambres à coucher

# 5.2.1.3 Prix médian des logements selon l'occupation des logements (vacants ou occupés) ou des logements nouvellement construits

# 5.2.1.4 Ventes sans garantie légale

Données non spécifiques à Laval dans le cahier métropolitain.

# 5.2.1.5 Sur le marché locatif

There is no data which describes sales prices for rental buildings.

# 5.2.1.6 Loyer moyen des logements locatifs selon le nombre de chambres à coucher

```{r rent_bedrooms}
rent_90s <- 
  rent_by_bedroom |> 
  filter(is.na(zone), bedroom == "Total", year %in% c(1990, 1999)) |> 
  pull(value) |> 
  scales::dollar()

rent_years <- 
  rent_by_bedroom |> 
  filter(is.na(zone)) |>
  mutate(date = case_when(
    year >= 2019 ~ "2019-2023",
    year >= 2014 ~ "2014-2018",
    year >= 2009 ~ "2009-2013",
    year >= 2004 ~ "2004-2008",
    year >= 1999 ~ "1999-2003",
    year >= 1994 ~ "1994-1998",
    year >= 1990 ~ "1990-1993")) |> 
  summarize(avg = mean(value), .by = c(date, bedroom)) |> 
  pivot_wider(names_from = bedroom, values_from = avg) |> 
  relocate(Total, .before = Bachelor)

bach_abs <- scales::dollar(rent_years$Bachelor[7] - rent_years$Bachelor[6])
bach_pct <- scales::percent((rent_years$Bachelor[7] - rent_years$Bachelor[6]) /
                             rent_years$Bachelor[6])
bach_2014 <- scales::dollar(rent_years$Bachelor[6])
bach_2019 <- scales::dollar(rent_years$Bachelor[7])

one_abs <- scales::dollar(rent_years$`1 Bedroom`[7] - rent_years$`1 Bedroom`[6])
one_pct <- scales::percent((rent_years$`1 Bedroom`[7] - rent_years$`1 Bedroom`[6]) /
                             rent_years$`1 Bedroom`[6])
one_2014 <- scales::dollar(rent_years$`1 Bedroom`[6])
one_2019 <- scales::dollar(rent_years$`1 Bedroom`[7])

three_abs <- scales::dollar(rent_years$`3 Bedroom +`[7] - rent_years$`3 Bedroom +`[6])
three_pct <- scales::percent((rent_years$`3 Bedroom +`[7] - rent_years$`3 Bedroom +`[6]) /
                             rent_years$`3 Bedroom +`[6])
three_2014 <- scales::dollar(rent_years$`3 Bedroom +`[6])
three_2019 <- scales::dollar(rent_years$`3 Bedroom +`[7])

```

In the 1990s, average rents in purpose-built rental buildings in Laval were stagnant; in 1990 the average monthly rent across all bedroom types was `r rent_90s[1]`, and by 1999 it had only increased slightly to `r rent_90s[2]`. In inflation-adjusted terms, rents actually declined city-wide in the 1990s. Rents started to increase in the early 2000s, and since 2010 in particular, average rents have been rising rapidly across all bedroom types.

```{r plot_5_2_1_6_facet, eval=FALSE}
plot_5_2_1_6_facet
```

```{r plot_5_2_1_6_change_facet, eval=FALSE}
plot_5_2_1_6_change_facet
```

```{r table_5_2_1_6_five_year}
table_5_2_1_6_five_year
```

Although all bedroom types have seen rapid rent increases in recent years, the increase has been lower in both absolute and relative terms in bachelor units. In the 2019-2023 period, rents for bachelor units increased `r bach_abs` from `r bach_2014` to `r bach_2019`—a `r bach_pct` increase. By contrast, rents for 1-bedroom units increased `r one_abs` from `r one_2014` to `r one_2019`—a `r one_pct` increase—and rents for 3-and-more-bedroom units increased `r three_abs` from `r three_2014` to `r three_2019`—a `r three_pct` increase.

The increase in purpose-built rental rents has not been spread evenly across the City. For larger units, rents have become particularly high in the Chomedey/Sainte-Dorothée sector. By contrast, smaller units (bachelor and 1-bedroom suites) remain relatively affordable in the eastern portion of the island.

```{r map_5_2_1_6_annual, eval=FALSE}
map_5_2_1_6_annual
```

```{r rent_construction}
rent_years <- 
  rent_by_construction |> 
  filter(is.na(zone), year == 2023) |> 
  pull(value)

new_2023 <- scales::dollar(rent_years[4])
old_low_2023 <- scales::dollar(rent_years[2])
old_high_2023 <- scales::dollar(rent_years[1])
```

Rents have risen particularly quickly in new buildings. While the average rent in 2023 reached `r new_2023` in buildings constructed in the year 2000 or later, the equivalent figure was between `r old_low_2023` and `r old_high_2023` in buildings constructed before 2000. This gap has been present since the beginning of the time series (1990), but it has widened substantially since 2020, when the rents in new construction skyrocketed relative to other construction dates.

```{r plot_5_2_1_6_construction_facet, eval=FALSE}
plot_5_2_1_6_construction_facet
```

```{r table_5_2_1_6_construction_five_year}
table_5_2_1_6_construction_five_year
```

# 5.2.1.7 Taux d'inoccupation (différenciation entre vacants et occupés) selon le nombre de chambres à coucher et le prix

```{r vacancy_by_bedroom}
three_br_vacancy <- 
  vacancy_by_bedroom |> 
  filter(is.na(zone), bedroom == "3 Bedroom +", year >= 2019) |> 
  pull(value) |> 
  mean(na.rm = TRUE) |> 
  scales::percent(accuracy = 0.1, scale = 1)
```
The evolution of the vacancy rate in purpose-built rental buildings since 1990 is the inverse of the change in average rents documented in the last section. Vacancy rates were high in the 1990s, indicating a loose rental market where the supply of available rental housing was plentiful in comparison to the number of prospective tenants looking for apartments. A common rule of thumb for a neutral vacancy rate is 3%; when the rate is lower than 3%, rents tend to increase, and when the rate is higher than 3%, rents tend to be flat or decreasing. The city-wide vacancy rate exceeded 3% for most of the 1990s, corresponding to the decade of stagnating rents. In the late 1990s, the vacancy rate began a steep decline, and dipped below 1% in the early 2000s. For the last 20 years, the vacancy rate has never reached the 3% neutral point. This indicates a tight rental market where landlords are able to charge higher rents because there are many prospective tenants in relation to the supply of available rental units.

Vacancy rates have consistently been higher for smaller bedroom types—bachelor and one-bedroom apartments—and lower for family-sized units with two or more bedrooms. In fact, the vacancy rate for three-and-more-bedroom apartments in the last five years (2019-2023) was only `r three_br_vacancy`.

```{r plot_5_2_1_7_facet, eval=FALSE}
plot_5_2_1_7_facet
```

```{r table_5_2_1_7_five_year}
table_5_2_1_7_five_year
```

Over the last five years, the vacancy rate has been particularly low in the central part of the city: the Laval-des-Rapides and Vimont/Auteuil zones. The somewhat higher vacancy rate in the Chomedey/Sainte-Dorothée zone is likely a compositional effect of higher-rent units in that zone, as we explore momentarily.

```{r map_5_2_1_7_annual, eval=FALSE}
map_5_2_1_7_annual
```

From 2012 through 2017 (CMHC does not have earlier data), there was very little difference in the vacancy when broken down among different rent levels. For example, from 2012-2015, all four quartiles of rent had vacancy rates between 2.2% and 2.7%. From 2018 onwards, however, high rent buildings have diverged from the others. The vacancy rate among top-quartile buildings has increased substantially—to an average of 5.5% in 2020-2023—at the same time as the vacancy rate among the other three quartiles has remained steady or even decreased. This pattern suggests that demand for higher-end rentals has slackened, and further analysis suggests it is specifically newly-constructed rental buildings which have seen vacancy rates climb.

```{r plot_5_2_1_7_rent_facet, eval=FALSE}
plot_5_2_1_7_rent_facet
```

```{r table_5_2_1_7_rent_five_year}
table_5_2_1_7_rent_five_year
```

```{r plot_5_2_1_7_construction_facet, eval=FALSE}
plot_5_2_1_7_construction_facet
```

High vacancy rates among newly constructed and high-rent apartment buildings are particularly noticeable in the Chomedey/Sainte-Dorothée zone, where there are not only an over-representation of this type of renetal unit, but where the vacancy rate within this submarket is higher than elsewhere in the city. This suggests that a spatial equilibrium in rental supply and demand has not been reached with newly constructed rental units. New rental units are coming on to the market disproportionately in Chomedey/Sainte-Dorothée (as we discuss in section 6.1), at high rents, and are remaining vacant at much higher than expected rates. Meanwhile, elsewhere in the city the vacancy rate for older and more modestly priced rental units is historically low. If this pattern continues into the future, a softening in rents in newer buildings in Chomedey/Sainte-Dorothée should be expected, alongside continued high rates of rent growth in other buildings.

```{r map_5_2_1_7_rent_annual, eval=FALSE}
map_5_2_1_7_rent_annual
```


# 5.2.1.8 Valeur foncière (secteur lucratif, secteur non lucratif)

_Data source: Unité d'evaluation foncière_

In 2019, the average assessed value of a residential property in Laval was `r scales::dollar(mean(uef$value))`. In both per-property and per-unit terms, detached homes had the highest average assessed value (`r uef_values$per_property[1]` per property, and `r uef_values$per_unit[1]` per unit), followed by "jumelé" (`r uef_values$per_property[2]` per property, and `r uef_values$per_unit[2]` per unit), then "en rangée" (`r uef_values$per_property[4]` per property, and `r uef_values$per_unit[4]` per unit), and finally "intégré" (`r uef_values$per_property[3]` per property, and `r uef_values$per_unit[3]` per unit).

```{r plot_6_1_12_boxplot, eval=FALSE}
plot_6_1_12_boxplot
```

All property types display a clear positive relationship between construction date and assessed value; newer properties have higher assessed values on average, although the relationship is stronger in per-property terms than in per-unit terms.

```{r plot_6_1_12_year_property, eval=FALSE}
plot_6_1_12_year_property
```

```{r plot_6_1_12_year_unit, eval=FALSE}
plot_6_1_12_year_unit
```

In general, assessed property values are higher in the south-western part of the city and lower in the north east. However, in per-square-foot terms, it is actually the central part of the city (H9B postal codes) where assessed values are highest.

```{r map_6_1_12, eval=FALSE}
map_6_1_12
```

